@{
    ViewData["Title"] = "Takvim";
}

<div class="d-flex justify-content-between align-items-end gap-2 mb-3">
    <div>
        <h2 class="mb-1">Takvim</h2>
        <div class="text-muted small">Ders programı ve duyurular burada görünür.</div>
    </div>
</div>

<div class="card-surface p-3">
    <div id="calendar"></div>
</div>

@section Scripts {
    <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js"></script>

    <script>
        (function () {
            const el = document.getElementById('calendar');
            if (!el) return;

            const calendar = new FullCalendar.Calendar(el, {
                initialView: 'dayGridMonth',
                height: 'auto',
                firstDay: 1,
                headerToolbar: {
                    left: 'prev,next today',
                    center: 'title',
                    right: 'dayGridMonth,timeGridWeek,timeGridDay'
                },
                navLinks: true,
                nowIndicator: true,
                eventTimeFormat: { hour: '2-digit', minute: '2-digit', hour12: false },

                events: {
                    url: '@Url.Action("Events", "Calendar")',
                    method: 'GET'
                },

                eventClick: function (info) {
                    if (info.event.url) {
                        info.jsEvent.preventDefault();
                        window.location.href = info.event.url;
                    }
                }
            });

            calendar.render();
        })();
    </script>
}
