@model XYZ.Application.Features.ClassSessions.Queries.GetClassSessionById.ClassSessionDetailDto

@{
    ViewData["Title"] = "Seans Detayı";
    var attendanceUrl = Url.Action("Session", "Attendance", new { id = Model.Id });
}

<div class="d-flex justify-content-between align-items-center mb-3">
    <div>
        <h2 class="h4 mb-1">@Model.Title</h2>
        <div class="text-muted small">
            @Model.Date.ToString("yyyy-MM-dd") · @Model.StartTime.ToString("HH\\:mm") - @Model.EndTime.ToString("HH\\:mm")
            · @Model.ClassName · @Model.BranchName
        </div>
    </div>

    <div class="d-flex gap-2">
        <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-outline-secondary btn-sm">Düzenle</a>
        <a href="@attendanceUrl" class="btn btn-primary btn-sm">Yoklamaya Git</a>

        <form asp-action="Delete" asp-route-id="@Model.Id" method="post" class="d-inline" onsubmit="return confirm('Seansı silmek istiyor musun?');">
            @Html.AntiForgeryToken()
            <button type="submit" class="btn btn-outline-danger btn-sm">Sil</button>
        </form>
    </div>
</div>

@if (TempData["ErrorMessage"] is string err && !string.IsNullOrWhiteSpace(err))
{
    <div class="alert alert-danger mb-3">@err</div>
}
@if (TempData["SuccessMessage"] is string ok && !string.IsNullOrWhiteSpace(ok))
{
    <div class="alert alert-success mb-3">@ok</div>
}

<div class="row g-3">
    <div class="col-lg-8">
        <div class="card-surface p-3">
            <h3 class="h6">Bilgiler</h3>
            <dl class="row mb-0">
                <dt class="col-sm-3 text-muted small">Konum</dt>
                <dd class="col-sm-9">@(!string.IsNullOrWhiteSpace(Model.Location) ? Model.Location : "-")</dd>

                <dt class="col-sm-3 text-muted small">Açıklama</dt>
                <dd class="col-sm-9">@(!string.IsNullOrWhiteSpace(Model.Description) ? Model.Description : "-")</dd>

                <dt class="col-sm-3 text-muted small">Durum</dt>
                <dd class="col-sm-9">@Model.Status</dd>

                <dt class="col-sm-3 text-muted small">Koç Notu</dt>
                <dd class="col-sm-9">@(!string.IsNullOrWhiteSpace(Model.CoachNote) ? Model.CoachNote : "-")</dd>
            </dl>
        </div>
    </div>

    <div class="col-lg-4">
        <div class="card-surface p-3">
            <h3 class="h6">Katılım Özeti</h3>
            <div class="small text-muted mb-2">
                Toplam öğrenci: <strong>@Model.TotalStudents</strong>
            </div>
            <div class="d-flex justify-content-between">
                <span>Present</span>
                <strong>@Model.PresentCount</strong>
            </div>
            <div class="d-flex justify-content-between">
                <span>Absent</span>
                <strong>@Model.AbsentCount</strong>
            </div>
        </div>
    </div>
</div>

<div class="mt-3">
    <a asp-action="Index" class="btn btn-link btn-sm">&larr; Listeye dön</a>
</div>
