@model XYZ.Web.Models.Attendance.ClassAttendanceOverviewViewModel

@{
    ViewData["Title"] = "Sınıf Yoklama Özeti";

    var from = Model.From.ToString("yyyy-MM-dd");
    var to = Model.To.ToString("yyyy-MM-dd");

    int total = Model.TotalAttendanceRecords;
    int present = Model.PresentCount;
    int absent = Model.AbsentCount + Model.ExcusedCount;
}

<h2 class="mb-3">
    @Model.ClassName
    <small class="text-muted">- Yoklama Özeti</small>
</h2>

<section class="mb-3">
    <form asp-action="ClassOverview"
          asp-controller="AttendanceReports"
          method="get"
          class="row g-2 align-items-end">
        <input type="hidden" name="classId" value="@Model.ClassId" />
        <input type="hidden" name="className" value="@Model.ClassName" />

        <div class="col-auto">
            <label class="form-label mb-1">Başlangıç</label>
            <input type="date"
                   name="from"
                   value="@from"
                   class="form-control form-control-sm" />
        </div>
        <div class="col-auto">
            <label class="form-label mb-1">Bitiş</label>
            <input type="date"
                   name="to"
                   value="@to"
                   class="form-control form-control-sm" />
        </div>
        <div class="col-auto">
            <label class="form-label mb-1">&nbsp;</label>
            <div>
                <button type="submit"
                        class="btn btn-primary btn-sm">
                    Filtrele
                </button>
            </div>
        </div>
    </form>
</section>

<section class="mb-3">
    <div class="card card-surface mb-3">
        <div class="card-body">
            <h3 class="h6 mb-3">Özet Bilgiler</h3>
            <dl class="row mb-0 small">
                <dt class="col-sm-4">Tarih Aralığı</dt>
                <dd class="col-sm-8">
                    @Model.From.ToString("dd.MM.yyyy")
                    -
                    @Model.To.ToString("dd.MM.yyyy")
                </dd>

                <dt class="col-sm-4">Toplam Seans</dt>
                <dd class="col-sm-8">@Model.TotalSessions</dd>

                <dt class="col-sm-4">Toplam Yoklama Kaydı</dt>
                <dd class="col-sm-8">@Model.TotalAttendanceRecords</dd>

                <dt class="col-sm-4">Katılan</dt>
                <dd class="col-sm-8">@Model.PresentCount</dd>

                <dt class="col-sm-4">Katılmayan (Absent + Excused)</dt>
                <dd class="col-sm-8">@absent</dd>

                <dt class="col-sm-4">Geç Gelen</dt>
                <dd class="col-sm-8">@Model.LateCount</dd>

                <dt class="col-sm-4">Bilinmeyen</dt>
                <dd class="col-sm-8">@Model.UnknownCount</dd>

                <dt class="col-sm-4">Katılım Oranı</dt>
                <dd class="col-sm-8">
                    @Model.AttendanceRate.ToString("0.0")%
                </dd>
            </dl>
        </div>
    </div>

    @if (Model.TotalAttendanceRecords == 0)
    {
        <div class="alert alert-info">
            Bu tarih aralığında yoklama kaydı bulunamadı.
        </div>
    }
</section>

<div class="mt-3">
    <a href="javascript:history.back();"
       class="btn btn-outline-secondary btn-sm">
        &laquo; Geri dön
    </a>
</div>
